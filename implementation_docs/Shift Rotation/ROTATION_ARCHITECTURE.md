# Shift Rotation Architecture Diagram

**Date**: November 13, 2025  
**Purpose**: Visual explanation of how rotation patterns flow through the system

---

## ğŸ”„ System Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  INPUT.json                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  {                                                                              â”‚
â”‚    "demandItems": [                                                             â”‚
â”‚      {                                                                          â”‚
â”‚        "demandId": "D_SITE_A_DAY",                                             â”‚
â”‚        "siteId": "SITE-A",                    â† Site ID                        â”‚
â”‚        "headcount": 2,                                                          â”‚
â”‚        "shifts": [{                                                             â”‚
â”‚          "rotationSequence": ["D","D","D","D","D","O","O"],  â† Pattern        â”‚
â”‚          "rotationAnchor": "2025-11-01",      â† Start date                    â”‚
â”‚          "shiftDetails": [{                                                     â”‚
â”‚            "shiftCode": "D",                                                    â”‚
â”‚            "start": "08:00",                                                    â”‚
â”‚            "end": "20:00"                                                       â”‚
â”‚          }],                                                                    â”‚
â”‚          "whitelist": {                                                         â”‚
â”‚            "employeeIds": ["E_ALICE", "E_BOB", "E_CHARLIE", "E_DIANA"]       â”‚
â”‚          }                                                                      â”‚
â”‚        }]                                                                       â”‚
â”‚      }                                                                          â”‚
â”‚    ]                                                                            â”‚
â”‚  }                                                                              â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â†“
                              [slot_builder.py]
                                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SLOT EXPANSION PROCESS                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  For each day in planning horizon (2025-11-01 to 2025-11-30):                 â”‚
â”‚                                                                                 â”‚
â”‚  Date Calculation:                                                              â”‚
â”‚    days_since_base = (current_date - anchor_date).days                         â”‚
â”‚    rotation_idx = days_since_base % len(sequence)                              â”‚
â”‚    shift_code = sequence[rotation_idx]                                         â”‚
â”‚                                                                                 â”‚
â”‚  Example Timeline:                                                              â”‚
â”‚    Nov 1: idx=0 â†’ sequence[0]="D" â†’ CREATE SLOT (work)                        â”‚
â”‚    Nov 2: idx=1 â†’ sequence[1]="D" â†’ CREATE SLOT (work)                        â”‚
â”‚    Nov 3: idx=2 â†’ sequence[2]="D" â†’ CREATE SLOT (work)                        â”‚
â”‚    Nov 4: idx=3 â†’ sequence[3]="D" â†’ CREATE SLOT (work)                        â”‚
â”‚    Nov 5: idx=4 â†’ sequence[4]="D" â†’ CREATE SLOT (work)                        â”‚
â”‚    Nov 6: idx=5 â†’ sequence[5]="O" â†’ SKIP (off day)                            â”‚
â”‚    Nov 7: idx=6 â†’ sequence[6]="O" â†’ SKIP (off day)                            â”‚
â”‚    Nov 8: idx=0 â†’ sequence[0]="D" â†’ CREATE SLOT (pattern repeats)             â”‚
â”‚                                                                                 â”‚
â”‚  Slot Object Created:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Slot {                                                       â”‚             â”‚
â”‚  â”‚   slot_id: "D_SITE_A_DAY-2025-11-01-D-a1b2c3",             â”‚             â”‚
â”‚  â”‚   demandId: "D_SITE_A_DAY",                                â”‚             â”‚
â”‚  â”‚   date: 2025-11-01,                                        â”‚             â”‚
â”‚  â”‚   shiftCode: "D",                                          â”‚             â”‚
â”‚  â”‚   start: 2025-11-01 08:00,                                 â”‚             â”‚
â”‚  â”‚   end: 2025-11-01 20:00,                                   â”‚             â”‚
â”‚  â”‚   headcount: 2,                    â† Need 2 people        â”‚             â”‚
â”‚  â”‚   siteId: "SITE-A",                â† Site info            â”‚             â”‚
â”‚  â”‚   whitelist: {                                             â”‚             â”‚
â”‚  â”‚     employeeIds: ["E_ALICE", "E_BOB", ...]               â”‚             â”‚
â”‚  â”‚   }                                                        â”‚             â”‚
â”‚  â”‚ }                                                          â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â†“
          Result: ~22 Slots for D_SITE_A_DAY (30 - 8 off days)
                                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            SOLVER ENGINE                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  Input: 80-100 slots from all demands                                          â”‚
â”‚                                                                                 â”‚
â”‚  Process:                                                                       â”‚
â”‚    1. Read all available slots                                                  â”‚
â”‚    2. Apply 40 constraints (C1-C17, S1-S16)                                    â”‚
â”‚    3. For each slot:                                                            â”‚
â”‚       - Pick employee from whitelist (e.g., ALICE, BOB)                        â”‚
â”‚       - Verify employee doesn't violate constraints                            â”‚
â”‚       - Assign if valid                                                         â”‚
â”‚    4. Generate optimal schedule                                                 â”‚
â”‚                                                                                 â”‚
â”‚  Rotation Enforcement:                                                          â”‚
â”‚    âœ“ Built-in at slot level (no special constraint needed)                     â”‚
â”‚    âœ“ Off days automatically respected (no slots created)                       â”‚
â”‚    âœ“ Solver can't break rotation pattern                                       â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              OUTPUT.json                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  {                                                                              â”‚
â”‚    "status": "OPTIMAL",                                                         â”‚
â”‚    "assignments": [                                                             â”‚
â”‚      {                                                                          â”‚
â”‚        "employeeId": "E_ALICE",                                               â”‚
â”‚        "demandId": "D_SITE_A_DAY",                                            â”‚
â”‚        "date": "2025-11-01",                                                  â”‚
â”‚        "startDateTime": "2025-11-01T08:00:00",                                â”‚
â”‚        "endDateTime": "2025-11-01T20:00:00",                                  â”‚
â”‚        "siteId": "SITE-A",               â† Site in output                     â”‚
â”‚        "hours": {"gross": 11.5, "normal": 11, "ot": 0.5, ...}               â”‚
â”‚      },                                                                         â”‚
â”‚      {                                                                          â”‚
â”‚        "employeeId": "E_BOB",                                                 â”‚
â”‚        "demandId": "D_SITE_A_DAY",                                            â”‚
â”‚        "date": "2025-11-01",                                                  â”‚
â”‚        "startDateTime": "2025-11-01T08:00:00",                                â”‚
â”‚        "endDateTime": "2025-11-01T20:00:00",                                  â”‚
â”‚        "siteId": "SITE-A",               â† Same site                          â”‚
â”‚        "hours": {...}                                                          â”‚
â”‚      },                                                                         â”‚
â”‚      ...                                                                        â”‚
â”‚      {                                                                          â”‚
â”‚        "employeeId": "E_ALICE",                                               â”‚
â”‚        "demandId": "D_SITE_A_DAY",                                            â”‚
â”‚        "date": "2025-11-06",                                                  â”‚
â”‚        "startDateTime": "2025-11-06T00:00:00",                                â”‚
â”‚        "endDateTime": "2025-11-06T00:00:00",                                  â”‚
â”‚        "siteId": "SITE-A",               â† OFF DAY: No assignment             â”‚
â”‚      }                                                                          â”‚
â”‚      ...                                                                        â”‚
â”‚    ]                                                                            â”‚
â”‚  }                                                                              â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Multi-Site Scenario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      THREE SITES EXAMPLE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INPUT.json:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SITE-A              â”‚  â”‚ SITE-B              â”‚  â”‚ SITE-C              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Pattern: [D D D D D â”‚  â”‚ Pattern: [D D D O D â”‚  â”‚ Pattern: [N N N N N â”‚
â”‚          O O]       â”‚  â”‚          D O]       â”‚  â”‚          O O]       â”‚
â”‚ Anchor: 2025-11-01  â”‚  â”‚ Anchor: 2025-11-01  â”‚  â”‚ Anchor: 2025-11-01  â”‚
â”‚ Shift: 08-20        â”‚  â”‚ Shift: 07-19        â”‚  â”‚ Shift: 20-08        â”‚
â”‚ Staff: 4            â”‚  â”‚ Staff: 3            â”‚  â”‚ Staff: 2            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                        â†“                        â†“
   [Slot Builder]          [Slot Builder]          [Slot Builder]
         â†“                        â†“                        â†“
    22 slots              24 slots                  18 slots
   (5-2 pattern)          (3-1-2 pattern)           (5-2 pattern)
         â†“                        â†“                        â†“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                   [Solver Engine]
                          â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Total: 64 slots across all sites  â”‚
         â”‚ Assignments: ~55-60 (depending)   â”‚
         â”‚ Status: OPTIMAL                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Rotation Index Calculation

```
        Rotation Sequence: ["D", "D", "D", "D", "D", "O", "O"]
        Anchor Date: 2025-11-01 (Saturday)

November 2025 Calendar:
  Week 1                Week 2               Week 3
  Sat Sun Mon Tue Wed   Sat Sun Mon Tue Wed  Sat Sun Mon Tue Wed
  1   2   3   4   5     8   9  10  11  12   15  16  17  18  19
  â†“   â†“   â†“   â†“   â†“     â†“   â†“   â†“   â†“   â†“   â†“   â†“   â†“   â†“   â†“
  0   1   2   3   4     0   1   2   3   4    0   1   2   3   4
  D   D   D   D   D     D   D   D   D   D    D   D   D   D   D
  âœ“   âœ“   âœ“   âœ“   âœ“     âœ“   âœ“   âœ“   âœ“   âœ“    âœ“   âœ“   âœ“   âœ“   âœ“
  6   7   6   7   6     6   7   6   7   6    6   7
  O   O   O   O   O     O   O   O   O   O    O   O
  âœ—   âœ—   âœ—   âœ—   âœ—     âœ—   âœ—   âœ—   âœ—   âœ—    âœ—   âœ—

Calculation Formula:
  For date 2025-11-12 (11 days after anchor):
    days_since_anchor = 11 - 0 = 11
    rotation_idx = 11 % 7 = 4
    shift_code = sequence[4] = "D"   â† Work on Nov 12

  For date 2025-11-13 (12 days after anchor):
    days_since_anchor = 12 - 0 = 12
    rotation_idx = 12 % 7 = 5
    shift_code = sequence[5] = "O"   â† Off on Nov 13
```

---

## ğŸ’¾ Constraint Tracking (S1)

```
S1_rotation_pattern.py:
                          â†“
    [Extract Patterns]
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ rotation_patterns = {                    â”‚
    â”‚   "D_SITE_A_DAY": {                      â”‚
    â”‚     "sequence": ["D","D","D","D","D",   â”‚
    â”‚                  "O","O"],               â”‚
    â”‚     "cycle_days": 7,                     â”‚
    â”‚     "anchor_date": "2025-11-01"         â”‚
    â”‚   },                                     â”‚
    â”‚   "D_SITE_B_DAY": {...},                â”‚
    â”‚   ...                                    â”‚
    â”‚ }                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    [Log Patterns]
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ [S1] Rotation Pattern Compliance        â”‚
    â”‚   Patterns found: 3                     â”‚
    â”‚     D_SITE_A_DAY: [D,D,D,D,D,O,O]      â”‚
    â”‚     D_SITE_B_DAY: [D,D,D,O,D,D,O]      â”‚
    â”‚     D_SITE_C_NIGHT: [N,N,N,N,N,O,O]   â”‚
    â”‚   Note: S1 is soft - rewards but       â”‚
    â”‚         doesn't block solutions        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    [Soft Constraint Status]
    âœ“ Tracking enabled
    âœ“ No violations possible (slot-level)
    âœ“ Informational only
```

---

## ğŸ¯ Key Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SHIFT ROTATION SYSTEM                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ 1. DEFINITION                                                   â”‚
â”‚    â€¢ Located in input.json demandItems                          â”‚
â”‚    â€¢ Each demand has siteId + rotationSequence                  â”‚
â”‚    â€¢ Multiple sites â†’ multiple demands                          â”‚
â”‚                                                                 â”‚
â”‚ 2. EXPANSION                                                    â”‚
â”‚    â€¢ slot_builder.py converts sequences to daily slots          â”‚
â”‚    â€¢ Uses modulo arithmetic to map days â†’ rotation positions    â”‚
â”‚    â€¢ Creates ~22-25 slots per demand per month                  â”‚
â”‚                                                                 â”‚
â”‚ 3. ENFORCEMENT                                                  â”‚
â”‚    â€¢ Happens at SLOT level (not constraint level)              â”‚
â”‚    â€¢ Off-days ("O") have no slots created                      â”‚
â”‚    â€¢ Solver can't assign on off-days (no slots to pick)        â”‚
â”‚    â€¢ Rotation is GUARANTEED (hard-enforced by design)          â”‚
â”‚                                                                 â”‚
â”‚ 4. TRACKING                                                     â”‚
â”‚    â€¢ S1 constraint logs patterns (informational)               â”‚
â”‚    â€¢ Soft constraint (doesn't block solutions)                 â”‚
â”‚    â€¢ Useful for analysis and reporting                         â”‚
â”‚                                                                 â”‚
â”‚ 5. OUTPUT                                                       â”‚
â”‚    â€¢ Assignments include siteId                                â”‚
â”‚    â€¢ Can query/filter by site                                  â”‚
â”‚    â€¢ All rotation patterns preserved                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**For more information**, see related documentation:
- `SHIFT_ROTATION_GUIDE.md` - Technical deep dive
- `ROTATION_EXAMPLES.md` - Real-world examples
- `ROTATION_QUICK_ANSWER.md` - Quick reference
- `S1_rotation_pattern.py` - Source code
